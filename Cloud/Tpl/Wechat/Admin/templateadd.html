<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>添加消息模版</title>
<include file="inc_css_js" />
</head>
<body class="withvernav">
<div class="bodywrapper">
<include file="inc_header" />
<include file="inc_left" />
<div class="centercontent tables">
		<div class="pageheader notab">
			<h1 class="pagetitle20">添加模版</h1>
			<span class="pagedesc">添加模版</span>
		</div><!--pageheader-->
		<div id="contentwrapper" class="contentwrapper">
			<div id="basicform" class="subcontent">
			<form class="stdform formvalidate" action="{:U('Wechat/Admin/templateadd')}" method="post">
				<p><label>模版名称</label>
				<span class="field">
					<input type="text" name="name" id="name" class="smallinput" validate='{required:true,messages:{required:"不能为空"}}' />
				</span></p>
				<p><label>模版编号</label>
					<span class="field">
					<input type="text" name="t_id" id="t_id" class="smallinput" validate='{required:true,messages:{required:"不能为空"}}' />
				</span></p>
				<p><label>排序</label>
					<span class="field">
					<input type="text" name="sort" id="sort" class="smallinput" validate='{required:true,messages:{required:"不能为空"}}' />
				</span></p>
				<p id='field0span'><label>字段名称</label>
					<span class="field">
					<input type="text" name="field0" id="field0" class="smallinput" validate='{required:true,messages:{required:"不能为空"}}' />
				</span></p>
				<p class="stdformbutton">
					<input type='button' id='' class='submit radius2' value='添加字段' onclick="addItem();"/>
					<input type="submit" class="submit radius2 submitadd" value="保存模版"  />
				</p>
			</form>
			</div>
		</div><!--contentwrapper-->
	</div><!--centercontent-->
</div><!--bodywrapper-->
<script>
var i=0;
function addItem(){
	var nowi = i;i++;
	//克隆字段
	var new_field = $("#field0span").clone();
	new_field.attr("id","field"+i+"span");//修改属性
	new_field.find('input[name=field0]').prop("name","field"+i);//修改表单元素name
	new_field.find('input[id=field0]').prop("id","field"+i);//修改表单元素id
	new_field.find('input[id=field'+i+']').prop("value","");//修改表单元素value

	var afid = "#field"+nowi+"span";
	$(new_field).insertAfter(afid);
	
}
</script>
</body>
</html>